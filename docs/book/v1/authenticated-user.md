# Authenticated user

Once the user is authenticated, `zend-expressive-authentication-oauth2` stores
the user's credential in a PSR-7 attribute under the name `Zend\Expressive\Authentication\UserInterface`.

This attribute contains an object that implements the [UserInterface](https://github.com/zendframework/zend-expressive-authentication/blob/master/src/UserInterface.php).

This object contains all the information generated by [thephpleage/oauth2-server](https://github.com/thephpleague/oauth2-server),
including the following data:

```php
[
    'oauth_user_id' => /* user's identifier (string) */,
    'oauth_client_id' => /* the client id (string) */,
    'oauth_access_token_id' => /* the access token id (string) */,
    'oauth_scopes' => /* the scopes (mixed, usually an array) */
]
```

You can retrieve all these values using `getDetails()` or `getDetail($name)`
functions of `UserInterface`. Here is reported an examples:

```php
$user->getDetails(); // returns all the values, as array

$userId = $user->getDetail('oauth_user_id', false);
if (false !== $userId) {
    printf("The user ID is %s", $userId);
}
```

If you want to retrieve the identity of the user (or the client) you can also
use the `getIdentity()` function. This function returns the user's ID if it is
not null, otherwise it returns the client's ID.

The `getRoles()` function of the `UserInterface` object returns always an empty
array.

## Customize the user's object

You can customize the user's object as you need but you must implement the
`UserInterface`. To customize the user object you need to change the service
with name `Zend\Expressive\Authentication\UserInterface` pointing to your
implementation. For instance, you can point to a `CustomUserFactory` class
that returns a `CustomUser` object (that implements `UserInterface`) as follows:

```php
// config/autoload/custom-user.local.php
return [
    'dependencies' => [
        'factories' => [
            UserInterface::class => CustomUserFactory::class,
        ]
    ]
];
```
